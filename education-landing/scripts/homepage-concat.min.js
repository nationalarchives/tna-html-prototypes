/*! Minified JavaScript created in Discovery 27.06.2019. 2019-07-11 */

!function(s,a,e){"use strict";s.fn.backstretch=function(i,n){return(i===e||0===i.length)&&s.error("No images were supplied for Backstretch"),0===s(a).scrollTop()&&a.scrollTo(0,0),this.each(function(){var t=s(this),e=t.data("backstretch");e&&(n=s.extend(e.options,n),e.destroy(!0)),e=new r(this,i,n),t.data("backstretch",e)})},s.backstretch=function(t,e){return s("body").backstretch(t,e).data("backstretch")},s.expr[":"].backstretch=function(t){return s(t).data("backstretch")!==e},s.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var o={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},i={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999},r=function(t,e,i){if(this.options=s.extend({},s.fn.backstretch.defaults,i||{}),this.images=s.isArray(e)?e:[e],s.each(this.images,function(){s("<images />")[0].src=this}),this.isBody=t===document.body,this.$container=s(t),this.$wrap=s('<div class="backstretch"></div>').css(o).appendTo(this.$container),this.$root=this.isBody?s(k?a:document):this.$container,!this.isBody){var n=this.$container.css("position"),r=this.$container.css("zIndex");this.$container.css({position:"static"===n?"relative":n,zIndex:"auto"===r?0:r,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&k?"fixed":"absolute"}),this.index=0,this.show(this.index),s(a).on("resize.backstretch",s.proxy(this.resize,this)).on("orientationchange.backstretch",s.proxy(function(){this.isBody&&0===a.pageYOffset&&(a.scrollTo(0,1),this.resize())},this))};r.prototype={resize:function(){try{var t,e={left:0,top:0},i=this.isBody?this.$root.width():this.$root.innerWidth(),n=i,r=this.isBody?a.innerHeight?a.innerHeight:this.$root.height():this.$root.innerHeight(),o=n/this.$img.data("ratio");r<=o?(t=(o-r)/2,this.options.centeredY&&(e.top="-"+t+"px")):(t=((n=(o=r)*this.$img.data("ratio"))-i)/2,this.options.centeredX&&(e.left="-"+t+"px")),this.$wrap.css({width:i,height:r}).find("images:not(.deleteable)").css({width:n,height:o}).css(e)}catch(t){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){this.index=t;var n=this,r=n.$wrap.find("images").addClass("deleteable"),o=s.Event("backstretch.show",{relatedTarget:n.$container[0]});return clearInterval(n.interval),n.$img=s("<images />").css(i).bind("load",function(t){var e=this.width||s(t.target).width(),i=this.height||s(t.target).height();s(this).data("ratio",e/i),s(this).fadeIn(n.options.speed||n.options.fade,function(){r.remove(),n.paused||n.cycle(),n.$container.trigger(o,n)}),n.resize()}).appendTo(n.$wrap),n.$img.attr("src",n.images[t]),n}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(s.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(t){s(a).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),t||this.$wrap.remove(),this.$container.removeData("backstretch")}};var t,n,c,h,d,p,g,u,l,f,k=(t=navigator.userAgent,n=navigator.platform,c=t.match(/AppleWebKit\/([0-9]+)/),h=!!c&&c[1],d=t.match(/Fennec\/([0-9]+)/),p=!!d&&d[1],g=t.match(/Opera Mobi\/([0-9]+)/),u=!!g&&g[1],l=t.match(/MSIE ([0-9]+)/),f=!!l&&l[1],!((-1<n.indexOf("iPhone")||-1<n.indexOf("iPad")||-1<n.indexOf("iPod"))&&h&&h<534||a.operamini&&"[object OperaMini]"==={}.toString.call(a.operamini)||g&&u<7458||-1<t.indexOf("Android")&&h&&h<533||p&&p<6||"palmGetResource"in a&&h&&h<534||-1<t.indexOf("MeeGo")&&-1<t.indexOf("NokiaBrowser/8.5.0")||f&&f<=6))}(jQuery,window),$(document).on("change","input[type=checkbox]",function(t){var e=$(t.target);"tna-digitised-only"==e.prop("id")&&e.is(":checked")?$("#tna-only").prop("checked",!0):"tna-only"==e.prop("id")&&e.not(":checked")&&$("#tna-digitised-only").prop("checked",!1)}),BackgroundsApp=function(t,e){this.backgrounds=[],this.appliedBackground={},this.targetElement=t,this.init(e)},BackgroundsApp.prototype.addBackgroundToBackgroundsArray=function(t){this.backgrounds.push(t)},BackgroundsApp.prototype.addBackgroundsPassedToConstructor=function(t){for(var e=0;e<t.length;e++)this.addBackgroundToBackgroundsArray(t[e])},BackgroundsApp.prototype.getRandomBackground=function(t){var e=Math.floor(Math.random()*this.backgrounds.length);return this.backgrounds[e]},BackgroundsApp.prototype.setCurrentBackgroundProperty=function(){return bg=this.getRandomBackground(),this.appliedBackground=bg,bg},BackgroundsApp.prototype.getImageURL=function(){return""+this.appliedBackground.url},BackgroundsApp.prototype.getImageName=function(){return this.appliedBackground.imageName},BackgroundsApp.prototype.getColor=function(){return this.appliedBackground.color},BackgroundsApp.prototype.applyAsBackground=function(){var t=this.targetElement,e=this.getImageURL(),i=this.getColor();return $(t).css({"background-image":"url("+e+")",color:i}),"Target is : "+t+" and url is: "+e},BackgroundsApp.prototype.init=function(t){this.addBackgroundsPassedToConstructor(t),this.setCurrentBackgroundProperty(),this.applyAsBackground()},BackgroundsApp,app=new BackgroundsApp(".search-banner",[{url:"https://discovery.nationalarchives.gov.uk/Content/images/bg-discovery-INF2-2-6-alt.jpg",imageName:"...",color:"rgb(255, 255, 255)",imageLibraryURL:"..."},{url:"https://discovery.nationalarchives.gov.uk/Content/images/bg-discovery-INF3-534-1-alt.jpg",imageName:"...",color:"rgb(255, 255, 255)",imageLibraryURL:"..."},{url:"https://discovery.nationalarchives.gov.uk/Content/images/bg-discovery-INF3-1236-alt.jpg",imageName:"...",color:"rgb(255, 255, 255)",imageLibraryURL:"..."}]),$(".popular-search-terms a").on("click",function(t){$this=$(this);var e=$this.text();dcsMultiTrack("DCS.dcsuri","/searchterms/","WT.ti",e,"WT.cg_n","Common search terms","WT.dl","0")});
